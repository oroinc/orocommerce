{% macro addToShoppingListButton(options) -%}
    {% import _self as buttons %}

    {% set btnOptions = {
        dataUrl: path(options.dataUrl, options.dataUrlOptions|merge({id: options.shoppingList.id})),
        dataAttributes: options.dataAttributes,
        btnLabel: options.shoppingList.label,
        btnId: options.shoppingList.id,
        dataId: options.shoppingList.id,
        actionLabel: 'orob2b.shoppinglist.actions.add_to_shopping_list'|trans
    } %}

    {{ buttons.getButton(btnOptions) }}
{% endmacro %}

{% macro addToNewShoppingListButton(options) %}
    {% import _self as buttons %}
    {% set btnOptions = {
        dataUrl: path(options.dataUrl, options.dataUrlOptions|merge({id: 'new'})),
        dataAttributes: options.dataAttributes,
        btnLabel: 'orob2b.shoppinglist.actions.add_to_new_shopping_list'|trans,
        btnId: 'new',
        dataId: 'new',
        actionLabel: ''
    } %}

    {{ buttons.getButton(btnOptions) }}
{% endmacro %}

{% macro addToCurrentShoppingListButton(options) %}
    {% import _self as buttons %}
    {% set btnOptions = {
        dataUrl: path(options.dataUrl, options.dataUrlOptions|merge({id: 'current'})),
        dataAttributes: options.dataAttributes,
        btnLabel: 'orob2b.shoppinglist.entity_label'|trans,
        btnId: 'current',
        dataId: 'current',
        actionLabel: 'orob2b.shoppinglist.actions.add_to_shopping_list'|trans
    } %}

    {{ buttons.getButton(btnOptions) }}
{% endmacro %}

{% macro getButton(options) %}
    {% import 'OroUIBundle::macros.html.twig' as UI %}
    {{ UI.clientButton({
        'dataUrl': options.dataUrl,
        'dataAttributes': options.dataAttributes,
        'aCss': 'no-hash',
        'iCss': 'icon-plus hide-text',
        'dataId': options.dataId,
        'label' : options.actionLabel ~ ' ' ~ options.btnLabel
    }) }}
{% endmacro %}

{% macro createAddToShoppingListButton(options) %}
    {% import 'OroUIBundle::macros.html.twig' as UI %}
    {% import _self as buttons %}
    {% set buttonsHtml %}
        {{ buttons.addToCurrentShoppingListButton(options.current) }}
        {% for shoppingList in options.shoppingLists %}
            {{ buttons.addToShoppingListButton(options.existing|merge({shoppingList: shoppingList})) }}
        {% endfor %}
        {{ buttons.addToNewShoppingListButton(options.new) }}
    {% endset %}

    {{ UI.pinnedDropdownButton({
        'html': buttonsHtml
    }) }}
{% endmacro %}