parameters:
    oro_order.form.type.order_line_item.class: 'Oro\Bundle\OrderBundle\Form\Type\OrderLineItemType'

services:
    oro_order.form.type.order:
        class: 'Oro\Bundle\OrderBundle\Form\Type\OrderType'
        arguments:
            - '@oro_order.order.provider.order_address_security'
            - '@oro_order.handler.order_currency_handler'
            - '@oro_order.form.type.event_listener.subtotals_subscriber'
        tags:
            - { name: form.type, alias: oro_order_type }
        calls:
            - [setDataClass, ['%oro_order.entity.order.class%']]

    oro_order.form.type.order_address:
        class: 'Oro\Bundle\OrderBundle\Form\Type\OrderAddressType'
        arguments:
            - '@oro_locale.formatter.address'
            - '@oro_order.manager.order_address'
            - '@oro_order.order.provider.order_address_security'
            - '@oro_importexport.serializer'
        tags:
            - { name: form.type, alias: oro_order_address_type }
        calls:
            - [setDataClass, ['%oro_order.entity.order_address.class%']]

    oro_order.form.section.provider:
        class: 'Oro\Bundle\OrderBundle\Form\Section\SectionProvider'
        public: false

    oro_order.form.type.order_line_item:
        class: '%oro_order.form.type.order_line_item.class%'
        arguments:
            - '@doctrine'
            - '@oro_product.formatter.product_unit_label'
        calls:
            - [setDataClass, ['%oro_order.entity.order_line_item.class%']]
            - [setProductUnitClass, ['%oro_product.entity.product_unit.class%']]
            - [setSectionProvider, ['@oro_order.form.section.provider']]
        tags:
            - { name: form.type, alias: "oro_order_line_item" }

    oro_order.form.type.order_line_item_collection:
        class: 'Oro\Bundle\OrderBundle\Form\Type\OrderLineItemsCollectionType'
        tags:
            - { name: form.type, alias: "oro_order_line_items_collection" }

    oro_order.form.type.extension.order_data_storage:
        class: 'Oro\Bundle\OrderBundle\Form\Extension\OrderDataStorageExtension'
        parent: oro_product.form.type.extension.product_data_storage.abstract
        calls:
            - [setDataClass, ['%oro_order.entity.order.class%']]
            - [setExtendedType, ['oro_order_type']]
        tags:
            - { name: form.type_extension, alias: oro_order_type }

    oro_order.form.type.order_discount_item_collection:
        class: 'Oro\Bundle\OrderBundle\Form\Type\OrderDiscountItemsCollectionType'
        tags:
            - { name: form.type, alias: "oro_order_discount_items_collection" }

    oro_order.form.type.order_discount_item:
        class: 'Oro\Bundle\OrderBundle\Form\Type\OrderDiscountItemType'
        calls:
            - [setDataClass, ['%oro_order.entity.order_discount_item.class%']]
        tags:
            - { name: form.type, alias: "oro_order_discount_item" }

    oro_order.form.type.event_listener.subtotals_subscriber:
        class: 'Oro\Bundle\OrderBundle\Form\Type\EventListener\SubtotalSubscriber'
        public: false
        arguments:
            - '@oro_order.order.total.total_helper'
            - '@oro_order.pricing.price_matcher'

    oro_order.form.type.order_shipping_tracking:
        class: 'Oro\Bundle\OrderBundle\Form\Type\OrderShippingTrackingType'
        arguments:
            - '@?oro_shipping.shipping_method.registry'
        tags:
            - { name: form.type }

    oro_order.form.type.order_shipping_tracking_collection:
        class: 'Oro\Bundle\OrderBundle\Form\Type\OrderShippingTrackingCollectionType'
        tags:
            - { name: form.type }

    oro_order.form.type.select_switch_input:
        class: 'Oro\Bundle\OrderBundle\Form\Type\SelectSwitchInputType'
        tags:
            - { name: form.type }
