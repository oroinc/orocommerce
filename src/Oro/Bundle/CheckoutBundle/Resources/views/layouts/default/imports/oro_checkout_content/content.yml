layout:
    imports:
        -
            id: checkout_line_items_grid
            root: __checkout_order_summary_line_items_container
            namespace: checkout_order_summary_line_items

    actions:
        - '@setBlockTheme':
            themes: '@OroCheckout/layouts/default/imports/oro_checkout_content/content.html.twig'
        - '@add':
            id: order_taxes_template
            blockType: block
            parentId: head
            siblingId: ~
            prepend: false
        - '@addTree':
            items:
                __checkout_content:
                    blockType: container
                __checkout_information:
                    blockType: container
                __checkout_information_head:
                    blockType: container
                __checkout_information_title:
                    blockType: checkout_information_title
                    options:
                        workflowStep: '=data["workflowStep"]'
                        stepOrder: '=data["oro_checkout_steps"].getStepOrder(data["workflowItem"], context["workflowStepName"], excludedSteps)'
                        excludedSteps: '=["enter_credentials_step"]'
                __checkout_information_body:
                    blockType: container
                __checkout_form:
                    blockType: checkout_form
                    options:
                        checkout: '=data["checkout"]'
                        form: '=data["oro_checkout_transition_form"].getTransitionFormView(data["workflowItem"])'
                __checkout_form_errors:
                    blockType: checkout_form_errors
                    options:
                        checkout: '=data["checkout"]'
                        form: '=data["oro_checkout_transition_form"].getTransitionFormView(data["workflowItem"])'
                        workflowItem: '=data["workflowItem"]'
                __checkout_form_fields:
                    blockType: checkout_form_fields
                    options:
                        checkout: '=data["checkout"]'
                        form: '=data["oro_checkout_transition_form"].getTransitionFormView(data["workflowItem"])'
                        workflowItem: '=data["workflowItem"]'
                __checkout_additional_options:
                    blockType: checkout_form_fields
                    options:
                        checkout: '=data["checkout"]'
                        form: '=data["oro_checkout_transition_form"].getTransitionFormView(data["workflowItem"])'
                        workflowItem: '=data["workflowItem"]'
                        visible: '=data["oro_checkout_transition_form"].getTransitionFormView(data["workflowItem"])'
                __checkout_order_summary_container:
                    blockType: container
                __checkout_order_summary:
                    blockType: checkout_order_summary
                    options:
                        visible: '=context["workflowStepName"]!="order_review"'
                        checkout: '=data["checkout"]'
                __checkout_order_summary_header:
                    blockType: container
                __checkout_order_summary_title:
                    blockType: container
                __checkout_order_summary_edit_link:
                    blockType: checkout_order_summary_edit_link
                    options:
                        workflowItem: '=data["workflowItem"]'
                __checkout_order_summary_content:
                    blockType: container
                __checkout_order_summary_line_items_container:
                    blockType: container

                __checkout_order_summary_notes_container:
                    blockType: container
                    options:
                        visible: '=context["workflowStepName"]!="order_review" && context["workflowName"]!="b2b_flow_checkout_single_page"'
                        vars:
                            notes: '=data["checkout"].getCustomerNotes()'
                __checkout_order_summary_notes_title:
                    blockType: block
                    options:
                        visible: '=context["workflowStepName"]!="order_review" && context["workflowName"]!="b2b_flow_checkout_single_page"'
                        vars:
                            notes: '=data["checkout"].getCustomerNotes()'
                __checkout_order_summary_notes:
                    blockType: order_summary_notes
                    options:
                        visible: '=context["workflowStepName"]!="order_review" && context["workflowName"]!="b2b_flow_checkout_single_page"'
                        notes: '=data["checkout"].getCustomerNotes()'

                __checkout_order_footer:
                    blockType: container

                __checkout_order_footer_col_first:
                    blockType: container

                __checkout_order_footer_col_second:
                    blockType: container

                __checkout_order_summary_totals_main:
                    blockType: container

                __checkout_order_summary_totals_container:
                    blockType: layout_subtree_update
                    options:
                        reloadEvents: ['datagrid_create_before', 'shopping-list:refresh']
                        showLoading: false
                        onLoadingCssClass: 'loading-blur'
                __checkout_order_summary_totals:
                    blockType: price_totals
                    options:
                        totals: '=data["oro_checkout_totals"].getData(data["checkout"])'
                        entityClassName: 'Oro\Bundle\CheckoutBundle\Entity\Checkout'
                        entityId: '=data["checkout"].getId()'
                        events:
                            - 'checkout:shipping-method:changed'
                        selectors:
                            form: '[name$="oro_workflow_transition"]'
                        skipMaskView: true
                        route: 'oro_checkout_frontend_totals'
                        vars:
                            itemsCount: '=data["oro_checkout_line_items_totals"].getData(data["checkout"]).count()'
                            totalsConainerClassName: ''

                __checkout_form_buttons:
                    blockType: container
                __checkout_button_continue:
                    blockType: checkout_transition_continue
                    options:
                        transitionData: '=data["oro_checkout_transition"].getContinueTransition(data["workflowItem"])'
                        checkout: '=data["checkout"]'
                        vars:
                            showRequiredLabel: true
                __checkout_button_back:
                    blockType: checkout_transition_back
                    options:
                        transitionData: '=data["oro_checkout_transition"].getBackTransition(data["workflowItem"])'
                        checkout: '=data["checkout"]'
            tree:
                __root:
                    __checkout_content:
                        __checkout_information:
                            __checkout_information_head:
                                __checkout_information_title: ~
                            __checkout_information_body:
                                __checkout_form:
                                    __checkout_form_errors: ~
                                    __checkout_form_fields:
                                        __checkout_additional_options: ~
                                    __checkout_form_buttons:
                                        __checkout_button_continue: ~
                                        __checkout_button_back: ~
                        __checkout_order_summary_container:
                            __checkout_order_summary:
                                __checkout_order_summary_header:
                                    __checkout_order_summary_title:
                                    __checkout_order_summary_edit_link: ~
                                __checkout_order_summary_content:
                                    __checkout_order_summary_line_items_container: ~
                        __checkout_order_footer:
                            __checkout_order_footer_col_first:
                                __checkout_order_summary_notes_container:
                                    __checkout_order_summary_notes_title: ~
                                    __checkout_order_summary_notes: ~
                            __checkout_order_footer_col_second:
                                __checkout_order_summary_totals_main:
                                    __checkout_order_summary_totals_container:
                                        __checkout_order_summary_totals: ~
